<!DOCTYPE html>
<html>

<head>
    <title>Secret Website</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            background-image: url('/recources/bg.svg');
            background-repeat: no-repeat;
            background-size: cover;
        }

        #house {
            display: none;
            margin-left: auto;
            margin-right: auto;
        }

        #text {
            display: none;
        }

        button {
            padding: 3px;
        }

        #main {
            background-color: white;
            padding-bottom: 10px;
        }
    </style>
    <link rel="shortcut icon" href="#">
</head>

<body>
    <div id="main">
        <h1>
            Welcome to the Secret website, <span id="user"></span>!
        </h1>
        <p>Here you will use your one-time key to access your login ONCE!! You may only use your key to login one time,
            before you login again. It expires during login, and what you see in the URL bar is simply a thing used in
            the
            past. It no longer works.</p>
        <p>You are now able to acess ALL secrets and suprises FOR FREE, for no work at all.</p>
        <a href="/input">Input</a><br>
        <a href="/eyes">Eyes</a><br>
        <a href="/ball">Ball</a><br>
        <a href="/button">The even more Annoying button</a><br><br>

        <button id="houseButton" onclick="house()">Click to Show the House</button>

        <img src="/recources/house.svg" alt="The House" id="house"><br>
        <p id="text">You are free. Feel satisfied.</p>
    </div>
    <script>
        let urlParams = new URLSearchParams(document.location.search);
        const params = {
            key: urlParams.get("key"),
        };
        const options = {
            method: 'POST',
            body: JSON.stringify(params),
            headers: { 'Content-Type': 'application/json' }
        };
        fetch('/api/users', options)
            .then(response => response.json())
            .then(response => {
                document.getElementById("user").textContent = response.user.uname;
            });

        function house() {
            document.getElementById("houseButton").remove();
            document.getElementById("house").style.display = "block";
            document.getElementById("text").style.display = "block";
        }


    </script>
</body>

</html>